<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="stock_product_lot_extended_tree_view" model="ir.ui.view">
            <field name="name">prodlots.report.tree</field>
            <field name="model">prodlots.report</field>
            <field eval="7" name="priority"/>
            <field name="arch" type="xml">

                <tree  string="Product Lots">
                    <field name="prodlot_id" />
                    <field name="product_id"/>
                    <field name="life_date"/>
                    <field name="location_id"/>
                    <field name="qty" />
                </tree>
            </field>
        </record>

        <record id="view_stock_product_lot_extended_filter" model="ir.ui.view">
            <field name="name">prodlots.report.filter</field>
            <field name="model">prodlots.report</field>
            <field name="arch" type="xml">
                <search string="Search Prodlots">
                    <field name="location_id"/>
                    <field name="product_id"/>
                    <field name="prodlot_id"/>
                    <filter string="Pharmacy" domain="[('location_id','ilike', 'Pharmacy'), ('prodlot_id', '!=', False)]"/>
                    <filter string="Stock Room" domain="[('location_id','ilike', 'Stock Room'), ('prodlot_id', '!=', False)]"/>
                    <filter string="Expire in 6 months"
                        domain="[
                            ['life_date', '&gt;', context_today().strftime('%%Y-%%m-%%d')],
                            ['life_date', '&lt;', (context_today() + datetime.timedelta(180)).strftime('%%Y-%%m-%%d')],
                            ['qty', '&gt;', 0],
                        ]"
                    />
                </search>
            </field>
        </record>
    </data>
</openerp>
